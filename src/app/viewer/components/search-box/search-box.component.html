<div class="d-flex flex-column align-self-center">
    <div class="input-group">
        <input
            *ngIf="!searchQuery.pos"
            type="text"
            class="form-control"
            (keyup.enter)="queryChange.next(searchQuery)"
            [(ngModel)]="searchQuery.text"
            placeholder="Search text">
        <app-word-filters *ngIf="searchQuery.pos"  (filterChange)="searchQuery.posFilter = $event"></app-word-filters>
        <div class="input-group-append">
            <fa-icon
                (click)="queryChange.next(searchQuery)"
                [icon]="faSearch"
                class="search-button input-group-text">
            </fa-icon>
        </div>
        <div class="input-group-append">
            <fa-icon
                (click)="isCollapsed = !isCollapsed"
                [icon]="faSlidersH"
                class="search-button input-group-text">
            </fa-icon>
        </div>
    </div>
    <div class="p-1">
        <div
            *ngIf="!isCollapsed"
            class="d-flex justify-content-between">
            <div class="d-flex flex-column">
                <label>???:</label>
                <div class="form-check">
                    <input
                        type="checkbox"
                        class="form-check-input"
                        [(ngModel)]="searchQuery.alignment"
                        id="alignCheckbox">
                    <label
                        class="form-check-label"
                        for="alignCheckbox">
                        Alignment
                    </label>
                </div>
                <div class="form-check">
                    <input
                        type="checkbox"
                        [(ngModel)]="searchQuery.pos"
                        (ngModelChange)="$event ? 0 : searchQuery.posFilter = undefined"
                        class="form-check-input"
                        id="posCheckbox">
                    <label
                        class="form-check-label"
                        for="posCheckbox">
                        POS
                    </label>
                </div>
            </div>

            <app-radio
                label="Mode:"
                [initialValue]="searchQuery.index"
                (value)="searchQuery.index = $event"
                [items]="indexes"></app-radio>
            <div class="d-flex flex-column">
                <label>Options:</label>
                <app-switch
                    label="Case sensitive"
                    [(value)]="searchQuery.caseSensitive"></app-switch>
                <app-switch
                    label="Diacritics sensitive"
                    [(value)]="searchQuery.diacriticSensitive"></app-switch>
                <app-switch
                    label="Exact Match"
                    [(value)]="searchQuery.exactMatch"></app-switch>
            </div>
        </div>
        <div
            *ngIf="!isCollapsed"
            class="form-group">
            <label for="texts">Sources:</label>
            <ng-select
                [items]="texts | async"
                [multiple]="true"
                [closeOnSelect]="false"
                [searchable]="false"
                labelForId="texts"
                [(ngModel)]="searchQuery.texts">
            </ng-select>
        </div>
    </div>
</div>
