mapPagesToBookVerse = (x) => x['to Book'] === x['from Book']
    ? [[x["from Book"], [x["from Line"], x["to Line"]]]]
    : [[x["from Book"], [x["from Line"], getEndLine(x)]], [x["to Book"], [1, x["to Line"]]]];

mapBooksToPages = (arr, i) => arr.filter((x) => x['from Book'] === i || x['to Book'] === i).map((x) => x.Page)

startData = [{ "Page": 1, "from Book": 1, "from I / P": "I", "from Line": 1, "to Book": 1, "to I / P": "P", "to Line": 9 }, { "Page": 2, "from Book": 1, "from I / P": "I", "from Line": 10, "to Book": 1, "to I / P": "P", "to Line": 23 }, { "Page": 3, "from Book": 1, "from I / P": "I", "from Line": 24, "to Book": 1, "to I / P": "P", "to Line": 32 }, { "Page": 4, "from Book": 1, "from I / P": "I", "from Line": 33, "to Book": 1, "to I / P": "P", "to Line": 40 }, { "Page": 5, "from Book": 1, "from I / P": "I", "from Line": 41, "to Book": 1, "to I / P": "P", "to Line": 49 }, { "Page": 6, "from Book": 1, "from I / P": "I", "from Line": 50, "to Book": 1, "to I / P": "P", "to Line": 54 }, { "Page": 7, "from Book": 1, "from I / P": "I", "from Line": 55, "to Book": 1, "to I / P": "I", "to Line": 68 }, { "Page": 8, "from Book": 1, "from I / P": "P", "from Line": 68, "to Book": 1, "to I / P": "P", "to Line": 81 }, { "Page": 9, "from Book": 1, "from I / P": "I", "from Line": 82, "to Book": 1, "to I / P": "I", "to Line": 95 }, { "Page": 10, "from Book": 1, "from I / P": "P", "from Line": 95, "to Book": 1, "to I / P": "P", "to Line": 108 }, { "Page": 11, "from Book": 1, "from I / P": "I", "from Line": 109, "to Book": 1, "to I / P": "P", "to Line": 122 }, { "Page": 12, "from Book": 1, "from I / P": "I", "from Line": 123, "to Book": 1, "to I / P": "P", "to Line": 136 }, { "Page": 13, "from Book": 1, "from I / P": "I", "from Line": 137, "to Book": 1, "to I / P": "P", "to Line": 151 }, { "Page": 14, "from Book": 1, "from I / P": "I", "from Line": 152, "to Book": 1, "to I / P": "P", "to Line": 165 }, { "Page": 15, "from Book": 2, "from I / P": "I", "from Line": 506, "to Book": 2, "to I / P": "P", "to Line": 519, "Remarks": "om: I/P 494-505" }, { "Page": 16, "from Book": 2, "from I / P": "I", "from Line": 520, "to Book": 2, "to I / P": "P", "to Line": 531 }, { "Page": 17, "from Book": 2, "from I / P": "I", "from Line": 532, "to Book": 2, "to I / P": "P", "to Line": 544 }, { "Page": 18, "from Book": 2, "from I / P": "I", "from Line": 545, "to Book": 2, "to I / P": "P", "to Line": 560, "Remarks": "om: I/P 558" }, { "Page": 19, "from Book": 2, "from I / P": "I", "from Line": 561, "to Book": 2, "to I / P": "P", "to Line": 575 }, { "Page": 20, "from Book": 2, "from I / P": "I", "from Line": 576, "to Book": 2, "to I / P": "P", "to Line": 590 }, { "Page": 21, "from Book": 2, "from I / P": "I", "from Line": 591, "to Book": 2, "to I / P": "P", "to Line": 605 }, { "Page": 22, "from Book": 2, "from I / P": "I", "from Line": 606, "to Book": 2, "to I / P": "P", "to Line": 620 }, { "Page": 23, "from Book": 2, "from I / P": "I", "from Line": 621, "to Book": 2, "to I / P": "P", "to Line": 635 }, { "Page": 24, "from Book": 2, "from I / P": "I", "from Line": 636, "to Book": 2, "to I / P": "P", "to Line": 650 }, { "Page": 25, "from Book": 2, "from I / P": "I", "from Line": 651, "to Book": 2, "to I / P": "P", "to Line": 665 }, { "Page": 26, "from Book": 2, "from I / P": "I", "from Line": 666, "to Book": 2, "to I / P": "P", "to Line": 680 }, { "Page": 27, "from Book": 2, "from I / P": "I", "from Line": 681, "to Book": 2, "to I / P": "P", "to Line": 695 }, { "Page": 28, "from Book": 2, "from I / P": "I", "from Line": 696, "to Book": 2, "to I / P": "P", "to Line": 710 }, { "Page": 29, "from Book": 2, "from I / P": "I", "from Line": 711, "to Book": 2, "to I / P": "P", "to Line": 725 }, { "Page": 30, "from Book": 2, "from I / P": "I", "from Line": 726, "to Book": 2, "to I / P": "P", "to Line": 740 }, { "Page": 31, "from Book": 2, "from I / P": "I", "from Line": 741, "to Book": 2, "to I / P": "P", "to Line": 755 }, { "Page": 32, "from Book": 2, "from I / P": "I", "from Line": 756, "to Book": 2, "to I / P": "P", "to Line": 770 }, { "Page": 33, "from Book": 2, "from I / P": "I", "from Line": 771, "to Book": 2, "to I / P": "P", "to Line": 785 }, { "Page": 34, "from Book": 2, "from I / P": "I", "from Line": 786, "to Book": 2, "to I / P": "P", "to Line": 800 }, { "Page": 35, "from Book": 2, "from I / P": "I", "from Line": 801, "to Book": 2, "to I / P": "P", "to Line": 815 }, { "Page": 36, "from Book": 2, "from I / P": "I", "from Line": 816, "to Book": 2, "to I / P": "P", "to Line": 830 }, { "Page": 37, "from Book": 2, "from I / P": "I", "from Line": 831, "to Book": 2, "to I / P": "P", "to Line": 845 }, { "Page": 38, "from Book": 2, "from I / P": "I", "from Line": 846, "to Book": 2, "to I / P": "P", "to Line": 860 }, { "Page": 39, "from Book": 2, "from I / P": "I", "from Line": 861, "to Book": 2, "to I / P": "P", "to Line": 875 }, { "Page": 40, "from Book": 2, "from I / P": "I", "from Line": 876, "to Book": 2, "to I / P": "P", "to Line": 877 }, { "Page": 41, "from Book": 1, "from I / P": "I", "from Line": 166, "to Book": 1, "to I / P": "P", "to Line": 176 }, { "Page": 42, "from Book": 1, "from I / P": "I", "from Line": 177, "to Book": 1, "to I / P": "P", "to Line": 189 }, { "Page": 43, "from Book": 1, "from I / P": "I", "from Line": 190, "to Book": 1, "to I / P": "I", "to Line": 203 }, { "Page": 44, "from Book": 1, "from I / P": "P", "from Line": 203, "to Book": 1, "to I / P": "P", "to Line": 216 }, { "Page": 45, "from Book": 1, "from I / P": "I", "from Line": 217, "to Book": 1, "to I / P": "I", "to Line": 230 }, { "Page": 46, "from Book": 1, "from I / P": "I", "from Line": 231, "to Book": 1, "to I / P": "I", "to Line": 244, "Remarks": "om: P 230" }, { "Page": 47, "from Book": 1, "from I / P": "P", "from Line": 244, "to Book": 1, "to I / P": "P", "to Line": 257 }, { "Page": 48, "from Book": 1, "from I / P": "I", "from Line": 258, "to Book": 1, "to I / P": "I", "to Line": 272, "Remarks": "om: I*/P 265" }, { "Page": 49, "from Book": 1, "from I / P": "P", "from Line": 272, "to Book": 1, "to I / P": "P", "to Line": 285 }, { "Page": 50, "from Book": 1, "from I / P": "I", "from Line": 286, "to Book": 1, "to I / P": "I", "to Line": 299 }, { "Page": 51, "from Book": 1, "from I / P": "P", "from Line": 299, "to Book": 1, "to I / P": "P", "to Line": 312 }, { "Page": 52, "from Book": 1, "from I / P": "I", "from Line": 313, "to Book": 1, "to I / P": "I", "to Line": 326 }, { "Page": 53, "from Book": 1, "from I / P": "P", "from Line": 326, "to Book": 1, "to I / P": "P", "to Line": 339 }, { "Page": 54, "from Book": 1, "from I / P": "I", "from Line": 340, "to Book": 1, "to I / P": "I", "to Line": 353 }, { "Page": 55, "from Book": 1, "from I / P": "P", "from Line": 353, "to Book": 1, "to I / P": "P", "to Line": 366 }, { "Page": 56, "from Book": 1, "from I / P": "I", "from Line": 367, "to Book": 1, "to I / P": "I", "to Line": 380 }, { "Page": 57, "from Book": 1, "from I / P": "P", "from Line": 380, "to Book": 1, "to I / P": "P", "to Line": 393 }, { "Page": 58, "from Book": 1, "from I / P": "I", "from Line": 394, "to Book": 1, "to I / P": "I", "to Line": 407 }, { "Page": 59, "from Book": 1, "from I / P": "P", "from Line": 407, "to Book": 1, "to I / P": "P", "to Line": 420 }, { "Page": 60, "from Book": 1, "from I / P": "I", "from Line": 421, "to Book": 1, "to I / P": "I", "to Line": 434 }, { "Page": 61, "from Book": 1, "from I / P": "P", "from Line": 434, "to Book": 1, "to I / P": "P", "to Line": 447 }, { "Page": 62, "from Book": 1, "from I / P": "I", "from Line": 448, "to Book": 1, "to I / P": "I", "to Line": 461 }, { "Page": 63, "from Book": 1, "from I / P": "P", "from Line": 461, "to Book": 1, "to I / P": "P", "to Line": 474 }, { "Page": 64, "from Book": 1, "from I / P": "I", "from Line": 475, "to Book": 1, "to I / P": "I", "to Line": 488 }, { "Page": 65, "from Book": 1, "from I / P": "P", "from Line": 488, "to Book": 1, "to I / P": "P", "to Line": 501 }, { "Page": 66, "from Book": 1, "from I / P": "I", "from Line": 502, "to Book": 1, "to I / P": "I", "to Line": 515 }, { "Page": 67, "from Book": 1, "from I / P": "P", "from Line": 515, "to Book": 1, "to I / P": "P", "to Line": 528 }, { "Page": 68, "from Book": 1, "from I / P": "I", "from Line": 529, "to Book": 1, "to I / P": "I", "to Line": 542 }, { "Page": 69, "from Book": 1, "from I / P": "I", "from Line": 542, "to Book": 1, "to I / P": "P", "to Line": 555 }, { "Page": 70, "from Book": 1, "from I / P": "I", "from Line": 556, "to Book": 1, "to I / P": "I", "to Line": 569 }, { "Page": 71, "from Book": 1, "from I / P": "P", "from Line": 569, "to Book": 1, "to I / P": "P", "to Line": 582 }, { "Page": 72, "from Book": 1, "from I / P": "I", "from Line": 583, "to Book": 1, "to I / P": "I", "to Line": 596 }, { "Page": 73, "from Book": 1, "from I / P": "P", "from Line": 596, "to Book": 1, "to I / P": "P", "to Line": 609 }, { "Page": 74, "from Book": 1, "from I / P": "I", "from Line": 610, "to Book": 2, "to I / P": "I", "to Line": 11, "Remarks": "1 P 611 // 2 I 1" }, { "Page": 75, "from Book": 2, "from I / P": "P", "from Line": 11, "to Book": 2, "to I / P": "P", "to Line": 24 }, { "Page": 76, "from Book": 2, "from I / P": "I", "from Line": 25, "to Book": 2, "to I / P": "I", "to Line": 38 }, { "Page": 77, "from Book": 2, "from I / P": "P", "from Line": 38, "to Book": 2, "to I / P": "P", "to Line": 51 }, { "Page": 78, "from Book": 2, "from I / P": "I", "from Line": 52, "to Book": 2, "to I / P": "P", "to Line": 65 }, { "Page": 79, "from Book": 2, "from I / P": "I", "from Line": 66, "to Book": 2, "to I / P": "I", "to Line": 79 }, { "Page": 80, "from Book": 2, "from I / P": "P", "from Line": 79, "to Book": 2, "to I / P": "P", "to Line": 92 }, { "Page": 81, "from Book": 2, "from I / P": "I", "from Line": 93, "to Book": 2, "to I / P": "I", "to Line": 106 }, { "Page": 82, "from Book": 2, "from I / P": "I", "from Line": 107, "to Book": 2, "to Line": 120 }, { "Page": 83, "from Book": 2, "from I / P": "P", "from Line": 120, "to Book": 2, "to I / P": "P", "to Line": 133 }, { "Page": 84, "from Book": 2, "from I / P": "I", "from Line": 134, "to Book": 2, "to I / P": "I", "to Line": 147 }, { "Page": 85, "from Book": 2, "from I / P": "P", "from Line": 147, "to Book": 2, "to I / P": "P", "to Line": 160 }, { "Page": 86, "from Book": 2, "from I / P": "I", "from Line": 161, "to Book": 2, "to I / P": "I", "to Line": 175, "Remarks": "om: I/P 168" }, { "Page": 87, "from Book": 2, "from I / P": "P", "from Line": 175, "to Book": 2, "to I / P": "P", "to Line": 188 }, { "Page": 88, "from Book": 2, "from I / P": "I", "from Line": 189, "to Book": 2, "to I / P": "I", "to Line": 202 }, { "Page": 89, "from Book": 2, "from I / P": "P", "from Line": 202, "to Book": 2, "to I / P": "P", "to Line": 216, "Remarks": "om: I/P 206" }, { "Page": 90, "from Book": 2, "from I / P": "I", "from Line": 217, "to Book": 2, "to I / P": "I", "to Line": 230 }, { "Page": 91, "from Book": 2, "from I / P": "P", "from Line": 230, "to Book": 2, "to I / P": "P", "to Line": 243 }, { "Page": 92, "from Book": 2, "from I / P": "I", "from Line": 244, "to Book": 2, "to I / P": "I", "to Line": 257 }, { "Page": 93, "from Book": 2, "from I / P": "P", "from Line": 257, "to Book": 2, "to I / P": "P", "to Line": 270 }, { "Page": 94, "from Book": 2, "from I / P": "I", "from Line": 271, "to Book": 2, "to I / P": "I", "to Line": 284 }, { "Page": 95, "from Book": 2, "from I / P": "P", "from Line": 284, "to Book": 2, "to I / P": "P", "to Line": 297 }, { "Page": 96, "from Book": 2, "from I / P": "I", "from Line": 298, "to Book": 2, "to I / P": "I", "to Line": 311 }, { "Page": 97, "from Book": 2, "from I / P": "P", "from Line": 311, "to Book": 2, "to I / P": "P", "to Line": 324 }, { "Page": 98, "from Book": 2, "from I / P": "I", "from Line": 325, "to Book": 2, "to I / P": "I", "to Line": 338 }, { "Page": 99, "from Book": 2, "from I / P": "P", "from Line": 338, "to Book": 2, "to I / P": "P", "to Line": 351 }, { "Page": 100, "from Book": 2, "from I / P": "I", "from Line": 352, "to Book": 2, "to I / P": "I", "to Line": 365 }, { "Page": 101, "from Book": 2, "from I / P": "P", "from Line": 365, "to Book": 2, "to I / P": "P", "to Line": 378 }, { "Page": 102, "from Book": 2, "from I / P": "I", "from Line": 379, "to Book": 2, "to I / P": "I", "to Line": 392 }, { "Page": 103, "from Book": 2, "from I / P": "P", "from Line": 392, "to Book": 2, "to I / P": "P", "to Line": 405 }, { "Page": 104, "from Book": 2, "from I / P": "I", "from Line": 406, "to Book": 2, "to I / P": "I", "to Line": 419 }, { "Page": 105, "from Book": 2, "from I / P": "P", "from Line": 419, "to Book": 2, "to I / P": "P", "to Line": 432 }, { "Page": 106, "from Book": 2, "from I / P": "I", "from Line": 433, "to Book": 2, "to I / P": "I", "to Line": 446 }, { "Page": 107, "from Book": 2, "from I / P": "P", "from Line": 446, "to Book": 2, "to I / P": "P", "to Line": 459 }, { "Page": 108, "from Book": 2, "from I / P": "I", "from Line": 460, "to Book": 2, "to I / P": "I", "to Line": 473 }, { "Page": 109, "from Book": 2, "from I / P": "P", "from Line": 473, "to Book": 2, "to I / P": "P", "to Line": 486 }, { "Page": 110, "from Book": 2, "from I / P": "I", "from Line": 487, "to Book": 3, "to I / P": "I", "to Line": 6, "Remarks": "2 P 493 // 3 I 1" }, { "Page": 111, "from Book": 3, "from I / P": "P", "from Line": 6, "to Book": 3, "to I / P": "P", "to Line": 19 }, { "Page": 112, "from Book": 3, "from I / P": "I", "from Line": 20, "to Book": 3, "to I / P": "I", "to Line": 33 }, { "Page": 113, "from Book": 3, "from I / P": "P", "from Line": 33, "to Book": 3, "to I / P": "P", "to Line": 46 }, { "Page": 114, "from Book": 3, "from I / P": "I", "from Line": 47, "to Book": 3, "to I / P": "I", "to Line": 60 }, { "Page": 115, "from Book": 3, "from I / P": "P", "from Line": 60, "to Book": 3, "to I / P": "P", "to Line": 73 }, { "Page": 116, "from Book": 3, "from I / P": "I", "from Line": 74, "to Book": 3, "to I / P": "I", "to Line": 88, "Remarks": "om: P78" }, { "Page": 117, "from Book": 3, "from I / P": "P", "from Line": 88, "to Book": 3, "to I / P": "P", "to Line": 101 }, { "Page": 118, "from Book": 3, "from I / P": "I", "from Line": 102, "to Book": 3, "to I / P": "I", "to Line": 115 }, { "Page": 119, "from Book": 3, "from I / P": "P", "from Line": 115, "to Book": 3, "to I / P": "P", "to Line": 128 }, { "Page": 120, "from Book": 3, "from I / P": "I", "from Line": 129, "to Book": 3, "to I / P": "I", "to Line": 142 }, { "Page": 121, "from Book": 3, "from I / P": "P", "from Line": 142, "to Book": 3, "to I / P": "P", "to Line": 155 }, { "Page": 122, "from Book": 3, "from I / P": "I", "from Line": 156, "to Book": 3, "to I / P": "I", "to Line": 169 }, { "Page": 123, "from Book": 3, "from I / P": "P", "from Line": 169, "to Book": 3, "to I / P": "P", "to Line": 182 }, { "Page": 124, "from Book": 3, "from I / P": "I", "from Line": 183, "to Book": 3, "to I / P": "I" }, { "Page": 125, "from Book": 3, "from I / P": "P", "from Line": 196, "to Book": 3, "to I / P": "I", "to Line": 196 }, { "Page": 126, "from Book": 3, "from I / P": "I", "from Line": 210, "to Book": 3, "to I / P": "P", "to Line": 209 }, { "Page": 127, "from Book": 3, "from I / P": "P", "from Line": 223, "to Book": 3, "to I / P": "I", "to Line": 223 }, { "Page": 128, "from Book": 3, "from I / P": "I", "from Line": 237, "to Book": 3, "to I / P": "P", "to Line": 236 }, { "Page": 129, "from Book": 3, "from I / P": "P", "from Line": 250, "to Book": 3, "to I / P": "I", "to Line": 250 }, { "Page": 130, "from Book": 3, "from I / P": "I", "from Line": 264, "to Book": 3, "to I / P": "P", "to Line": 263 }, { "Page": 131, "from Book": 3, "from I / P": "P", "from Line": 277, "to Book": 3, "to I / P": "I", "to Line": 277 }, { "Page": 132, "from Book": 3, "from I / P": "I", "from Line": 291, "to Book": 3, "to I / P": "P", "to Line": 290 }, { "Page": 133, "from Book": 3, "from I / P": "P", "from Line": 304, "to Book": 3, "to I / P": "I", "to Line": 304 }, { "Page": 134, "from Book": 3, "from I / P": "I", "from Line": 318, "to Book": 3, "to I / P": "P", "to Line": 317 }, { "Page": 135, "from Book": 3, "from I / P": "P", "from Line": 331, "to Book": 3, "to I / P": "I", "to Line": 331 }, { "Page": 136, "from Book": 3, "from I / P": "I", "from Line": 345, "to Book": 3, "to I / P": "P", "to Line": 344 }, { "Page": 137, "from Book": 3, "from I / P": "P", "from Line": 358, "to Book": 3, "to I / P": "I", "to Line": 358 }, { "Page": 138, "from Book": 3, "from I / P": "I", "from Line": 372, "to Book": 3, "to I / P": "P", "to Line": 371 }, { "Page": 139, "from Book": 3, "from I / P": "P", "from Line": 385, "to Book": 3, "to I / P": "I", "to Line": 385 }, { "Page": 140, "from Book": 3, "from I / P": "I", "from Line": 399, "to Book": 3, "to I / P": "P", "to Line": 398 }, { "Page": 141, "from Book": 3, "from I / P": "P", "from Line": 412, "to Book": 3, "to I / P": "I", "to Line": 412 }, { "Page": 142, "from Book": 3, "from I / P": "I", "from Line": 426, "to Book": 3, "to I / P": "P", "to Line": 425 }, { "Page": 143, "from Book": 3, "from I / P": "P", "from Line": 439, "to Book": 3, "to I / P": "I", "to Line": 439 }, { "Page": 144, "from Book": 3, "from I / P": "P", "from Line": 453, "to Book": 4, "to I / P": "P", "to Line": 4, "Remarks": "3 P 461 // 4 I 1" }]``